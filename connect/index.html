<html>
  <head>
    <title>Fake Authorization Page - Post Message Test</title>
    <style>
      html, body {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        width: 100%;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        font-size: 48px;
      }
    </style>
    <script>
      const data = {
        authorized: true
      };

      let count = 4;

      const interval = setInterval(() => {
        count--;
        document.getElementById("countdown").textContent = count;
        if (count === 0) {
          clearInterval(interval);
          document.getElementById("countdown").textContent = "âœ… Authorized";
          if (window.opener) {
            console.log('Sending a message!');
            window.opener.postMessage(data, '*');
            // My work here is done ðŸ‘‹
            window.close();
          } else {
            console.log('Countdown over but opener window to send message to!');
          }
        }
      }, 1000);
    </script>
  </head>
  <body>
    <h1 id='countdown'>4<h1>
  </body>
</html>