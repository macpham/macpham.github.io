<html>
  <head>
    <title>GitHub App User Authorization</title>
    <style>
      html, body {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        width: 100%;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        font-size: 48px;
      }
    </style>
    <script>
      // const authorized = "<%= @status %>" === "OK";
      const authorized = true;
      const data = { authorized };
      let count = 4;

      const interval = setInterval(() => {
        count--;
        if (count === 0) {
          clearInterval(interval);
          if (window.opener) {
            window.opener.postMessage(data, '*');
            window.close();
          } else {
            console.log('Countdown over but opener window to send message to!');
          }
        }
      }, 1000);
    </script>
  </head>
  <body>
    <h1 id='countdown'>âœ… Authorized<h1>
  </body>
</html>